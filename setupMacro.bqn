# Binary can be any file with the extentions:
# ".dll" on windows, ".a" on mingw win32, ".so" on linux, and ".dylib" on macos
binaryFileLocation â† âŠ‘â€¢args

# Makes an importer that improves the ffi function creation syntax
MakeImporter â‡ {ğ•¨ğ•ŠpathToBin: debugâ†ğ•¨âŠ£0
  NestedStructToStr â† {
    1â‰¥â‰¡ğ•©?ğ•©;
    IsPtr â† ("ustr"â‰¡Â¯4âŠ¸â†‘)âˆ¨('*'â‰¡âŠ‘)âˆ¨"str"â‰¡Â¯3âŠ¸â†‘
    (mÂ¬âŠ¸/ğ•©)âˆ¾'{'âˆ¾'}'Â«âˆ¾','âˆ¾Â¨ğ•ŠÂ¨ptrâŸIsPtrâŸ(âŸ¨âŸ©â‰¢â‰¢)Â¨ğ•©/Ëœmâ†Ã—â‰¡Â¨ğ•©
  }

  {ğ•¨ funcName _ğ•£ inpTypes: outTypeâ†ğ•¨âŠ£âŸ¨âŸ©
    IntoStr â† NestedStructToStr
    aâ†'>'âŠ¸âˆ¾âŒ¾âŠ‘âŸ(1=â‰ ) IntoStrÂ¨ğ•©
    HandleError â† {
      â€¢Out "DEBUG TYPE INFO:"
      â€¢Out â€¢Fmt ğ•©
      â€¢Out "END OF DEBUG TYPE INFO; BEGINING WITH FULL ERROR:"
      â€¢term.Flush@
      ğ•¨â€¢FFIğ•©
    }
    func â† pathToBin â€¢FFIâŠHandleError âŸ¨ NestedStructToStr outTypeâ‹„funcNameâŸ©âˆ¾a
    m â† strâŠ¸â‰¡Â¨a
    â€¢term.Flushâˆ˜@âˆ˜â€¢Outâˆ˜funcNameâŸdebugâŠ¸âŠ¢ {ğ•âˆ¾âŸœ@}âŸ(aâ‰¡â‹ˆ'>'âˆ¾str) {ğ•âˆ¾âŸœ@Â¨âŒ¾(mâŠ¸/)}âŸ(âˆ¨Â´m) func
  }
}

r â‡ MakeImporter binaryFileLocation

# predefined C types
bool â‡ "i8"
c    â‡ "i8"
i    â‡ "i32"
f    â‡ "f32"
u    â‡ "u32"
i8   â‡ "i8"
u8   â‡ "u8"
str  â‡ "*i8:c8"
uStr â‡ "*u8:c8"
ptr  â‡ "*:i8"